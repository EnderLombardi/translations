<core:FragmentDefinition xmlns="sap.m" xmlns:l="sap.ui.layout"
	xmlns:f="sap.ui.layout.form" xmlns:core="sap.ui.core">
	<VBox>
		<f:SimpleForm editable="false" layout="ResponsiveGridLayout" title="{i18nModel>OperatorData}"
			labelSpanL="12" labelSpanM="12" width="100%" adjustLabelSpan="false"
			columnsL="4" columnsM="2" columnsS="1">
			<f:content>

				<core:Title text="" />
				<Label text="{i18nModel>Category}" />
				<Select id="selectCategory" items="{disruptionCategoryModel>/Rowsets/Rowset/0/Row}"
					change="onSelectionChange" forceSelection="false" selectedKey="{DisruptionDetailModel>/MessageType}">
					<items>
						<core:Item text="{disruptionCategoryModel>DESCRIPTION}"
							key="{disruptionCategoryModel>MESSAGE_TYPE}" />
					</items>
				</Select>
				<Label text="{i18nModel>Expected}">
				</Label>
				<DatePicker id="expectedDate" displayFormat="short"
					value="{path: 'DisruptionDetailModel>/RequiredFixBy', formatter: 'airbus.mes.disruptions.Formatter.getDate'}"
					change="onExpectedDateChange" enabled="{parts: [ {path: 'DisruptionDetailModel>/OriginatorFlag'}, {path: 'DisruptionDetailModel>/Status'} ], formatter: 'airbus.mes.disruptions.Formatter.expectedDateEnable'}">
					<layoutData>
						<l:GridData span="L7 M7 S7" />
					</layoutData>
				</DatePicker>
				<TimePicker id="expectedTime" displayFormat="HH:mm"
					valueFormat="HH:mm"
					value="{path: 'DisruptionDetailModel>/RequiredFixBy', formatter: 'airbus.mes.disruptions.Formatter.getTime'}"
					change="onExpectedDateChange" enabled="{parts: [ {path: 'DisruptionDetailModel>/OriginatorFlag'}, {path: 'DisruptionDetailModel>/Status'} ], formatter: 'airbus.mes.disruptions.Formatter.expectedTimeEnable'}">
					<layoutData>
						<l:GridData span="L5 M5 S5" />
					</layoutData>
				</TimePicker>
				<Label text="{i18nModel>resGroup}" />
				<Select id="selectResponsibleGrp" items="{disruptionRsnRespGrp>/Rowsets/Rowset/1/Row}"
					change="onSelectionChange" forceSelection="false"  selectedKey="{DisruptionDetailModel>/ResponsibleGroup}">
					<!-- enabled="{parts: [ {path: 'DisruptionDetailModel>/ResponsibleFlag'}, {path: 'DisruptionDetailModel>/Status'} ], formatter: 'airbus.mes.disruptions.Formatter.setResponsibleGrpEnable'}"> -->
					<items>
						<core:Item text="{disruptionRsnRespGrp>ResponsibleGroupDesc}"
							key="{disruptionRsnRespGrp>ResponsibleGroup}" />
					</items>
				</Select>

				<core:Title text="" />
				<Label text="{i18nModel>reason}" />
				<Select id="selectAttribute" items="{disruptionRsnRespGrp>/Rowsets/Rowset/0/Row}"
					forceSelection="false" selectedKey="{DisruptionDetailModel>/Reason}">
					<!-- enabled="{parts: [ {path: 'DisruptionDetailModel>/OriginatorFlag'}, {path: 'DisruptionDetailModel>/Status'} ], formatter: 'airbus.mes.disruptions.Formatter.setReasonEnable'}"> -->
					<items>
						<core:Item text="{disruptionRsnRespGrp>REASON}" key="{disruptionRsnRespGrp>REASON}" />
					</items>
				</Select>
				<Label text="{i18nModel>bomItem}" />
				<MultiInput id="materials" valueHelpRequest="onMaterialValueHelpRequest"
					tokenChange="onMaterialTokenChange" enabled="false">
				</MultiInput>
				


				<core:Title text="" />
				<Label text="{i18nModel>gravity}" />
				<Select id="gravity" selectedKey="{DisruptionDetailModel>/Gravity}">
				<!-- enabled="{parts: [ {path: 'DisruptionDetailModel>/OriginatorFlag'}, {path: 'DisruptionDetailModel>/Status'} ], formatter: 'airbus.mes.disruptions.Formatter.setGravityEnable'}"> -->
					<items>
						<core:Item text="{i18nModel>NotBlocked}" key="1" />
						<core:Item text="{i18nModel>Disturbed}" key="2" />
						<core:Item text="{i18nModel>Blocked}" key="3" />
					</items>
				</Select>
				<Label text="{i18nModel>Jigtool}" />
				<MultiInput id="jigtools" valueHelpRequest="onJigToolValueHelpRequest"
					tokenChange="onJigToolTokenChange" enabled="false" />
					<Input id="selectFivemCategory" text="" visible="false"/>
            	
            	<core:Title text="" />				
				<Label text="{i18nModel>OpenDate}" />
				<DatePicker enabled="false" id="OpenDate" displayFormat="short"
					value="{path:'DisruptionDetailModel>/OpeningTime', formatter:'airbus.mes.disruptions.Formatter.getDate'}">
					<layoutData>
						<l:GridData span="L7 M7 S7" />
					</layoutData>
				</DatePicker>
				<TimePicker enabled="false" id="openTime" displayFormat="HH:mm"
					valueFormat="HH:mm"
					value="{path: 'DisruptionDetailModel>/OpeningTime', formatter: 'airbus.mes.disruptions.Formatter.getTime'}">
					<layoutData>
						<l:GridData span="L5 M5 S5" />
					</layoutData>
				</TimePicker>
				<Label text="{i18nModel>TimeLost}" />
				<Input placeholder="" id="timeLost"  value="{path: 'DisruptionDetailModel>/TimeLost', formatter: 'airbus.mes.disruptions.Formatter.setTimeLostValue'}"
					enabled="false">
				</Input>

			</f:content>
		</f:SimpleForm>

		<f:SimpleForm id="Execution" editable="true"
			layout="ResponsiveGridLayout" title="Execution" labelSpanL="12"
			labelSpanM="12" width="100%" adjustLabelSpan="false" emptySpanL="0"
			emptySpanM="0" columnsL="4" columnsM="2" columnsS="1">
			<f:content>
				<core:Title text="" />
				<Label text="{i18nModel>status}" />
				<Input id="status" enabled="false"
					value="{path: 'DisruptionDetailModel>/Status', formatter: 'airbus.mes.disruptions.Formatter.setDisruptionStatus'}">
				</Input>
				
				<Label text="{i18nModel>promisedDateTime}" id="promisedDateLabel" />
				<DatePicker id="promisedDate" valueFormat="yyyy-MM-dd"
					displayFormat="short"
					value="{path: 'DisruptionDetailModel>/PromisedDateTime', formatter: 'airbus.mes.disruptions.Formatter.getDate'}"
					enabled="{parts: [  {path: 'DisruptionDetailModel>/ResponsibleFlag'}, {path: 'DisruptionDetailModel>/Status'} ], formatter: 'airbus.mes.disruptions.Formatter.promisedDateEnable'}">
					<layoutData>
						<l:GridData span="L7 M7 S7" />
					</layoutData>
				</DatePicker>
				<TimePicker id="promisedTime" displayFormat="HH:mm"
					valueFormat="HH:mm:ss"
					value="{path: 'DisruptionDetailModel>/PromisedDateTime', formatter: 'airbus.mes.disruptions.Formatter.getTime'}"
					enabled="{parts: [  {path: 'DisruptionDetailModel>/ResponsibleFlag'}, {path: 'DisruptionDetailModel>/Status'} ], formatter: 'airbus.mes.disruptions.Formatter.promisedDateEnable'}">
					<layoutData>
						<l:GridData span="L5 M5 S5" />
					</layoutData>
				</TimePicker>


				<core:Title text="" />
				<Label text="{i18nModel>EscalationLevel}" />
				<Input id="escalationLevel" enabled="false"
					text="{path: 'operationDisruptionsModel>EscalationLevel', formatter: 'airbus.mes.disruptions.Formatter.setEscalationText'}">
				</Input>



				<core:Title text="" />

				<Label text="{i18nModel>dateOfEscalation}" />
				<DatePicker displayFormat="short"
					value="{path: 'DisruptionDetailModel>/EscalationDateTime', formatter: 'airbus.mes.disruptions.Formatter.getDate'}"
					enabled="false">
					<layoutData>
						<l:GridData span="L7 M7 S7" />
					</layoutData>
				</DatePicker>
				<TimePicker valueFormat="HH:mm" enabled="false"
					value="{path: 'DisruptionDetailModel>/EscalationDateTime', formatter: 'airbus.mes.disruptions.Formatter.getTime'}"
					displayFormat="HH:mm">
					<layoutData>
						<l:GridData span="L5 M5 S5" />
					</layoutData>
				</TimePicker>



				<core:Title text="" />
				<Label text="{i18nModel>Resolver}" />
				<Select id="selectResolver"
					items="{ path : 'disruptionResolverModel>/Rowsets/Rowset/0/Row' }"
					forceSelection="false" selectedKey="{DisruptionDetailModel>/ResolverID}">
					<items>
						<core:Item
							text="{disruptionResolverModel>Name}"
							key="{disruptionResolverModel>UserID}" />
					</items>
				</Select>
				<!-- <Select id="resolverNewID"
					items="{ path : 'disruptionResolverModel>/Rowsets/Rowset/0/Row' }"
					forceSelection="false" selectedKey="{DisruptionDetailModel>/ResolverID}">
					<items>
						<core:Item
							text="{disruptionResolverModel>Name}"
							key="{disruptionResolverModel>UserID}" />
					</items>
				</Select> -->
			</f:content>
		</f:SimpleForm>
		
		<f:SimpleForm id="Des_sol" editable="true" visible="true"
			layout="ResponsiveGridLayout" title="{i18nModel>disruptionHistory}"
			labelSpanL="12" labelSpanM="12" width="100%" adjustLabelSpan="false"
			emptySpanL="0" emptySpanM="0" columnsL="1" columnsM="1">
			<f:content>
				<VBox>
					
					<List showNoData="false"
						class="sapUiSmallMarginBeginEnd" items="{path: 'DisruptionDetailModel>/comments'}">

						<CustomListItem class="msgColor">
							<HBox
								class="sapUiSmallMarginBeginEnd sapUiTinyMarginTopBottom msgHeaderText">
								<items>
									<Text
										text="{i18nModel>from} : {path: 'DisruptionDetailModel>UserFullName', formatter: 'airbus.mes.disruptions.Formatter.textCaseFormat'}"></Text>
									<Text text="|" class="sapUiSmallMarginBeginEnd"></Text>
									<Text
										text="{i18nModel>action} : {parts: [ {path: 'DisruptionDetailModel>Action'}, {path: 'DisruptionDetailModel>Comments'}], formatter: 'airbus.mes.disruptions.Formatter.formatCommentAction'}"></Text>
									<Text text="|" class="sapUiSmallMarginBeginEnd"></Text>
									<Text
										text="{i18nModel>date/time} : {path: 'DisruptionDetailModel>Date'}"></Text>
								</items>
							</HBox>

							<Text
								text="{path: 'DisruptionDetailModel>Comments', formatter: 'airbus.mes.disruptions.Formatter.formatComment'}"
								class="sapUiSmallMarginBeginEnd sapUiSmallMarginBottom"></Text>
						</CustomListItem>
					</List>
				</VBox>


			</f:content>


		</f:SimpleForm>
		<f:SimpleForm id="disruptionComments" editable="false"
			layout="ResponsiveGridLayout" title="{i18nModel>description_solution}"
			labelSpanL="12" labelSpanM="12" width="100%" adjustLabelSpan="false"
			emptySpanL="0" emptySpanM="0" columnsL="1" columnsM="1">
			<f:content>
				<VBox>
					<HBox justifyContent="End" class="attachmentIcon">
						<core:Icon src="sap-icon://attachment" width="1rem"
							class="sapUiSmallMarginEnd" />
						<core:Icon src="sap-icon://camera" width="1rem" />
					</HBox>
					<TextArea width="100%" height="100%" id="comment">
						<layoutData>
							<l:GridData span="L12 M12 S12" />
						</layoutData>
					</TextArea>

				</VBox>
			</f:content>
		</f:SimpleForm>
	</VBox>
</core:FragmentDefinition>
