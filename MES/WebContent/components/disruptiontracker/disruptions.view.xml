<mvc:View controllerName="airbus.mes.disruptiontracker.disruptions"
	xmlns:l="sap.ui.layout" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc"
	xmlns="sap.m" xmlns:ui="sap.ui.table">
	<Page class=" sapUiSizeCozy disruptions" showHeader="false">


		<Toolbar class="pageHeader">
			<Label text="{disruptiontrackerI18n>disruptionsTitle}" id="headerText" class="headerText sapUiSmallMarginBeginEnd" />
			
			<Select id="stationComboBox" class="sapUiMediumMarginEnd"
				placeholder="{disruptiontrackerI18n>selectStation}" items="{ path:'plantModel>/Rowsets/Rowset/0/Row' }"
				selectedKey="" change="filterByStation"
				enabled="{Profile>/identifiedUser/permissions/DISRUPTION_DISRUPTION_LIST}">
				<core:Item key="{plantModel>station}" text="{plantModel>stationDescription}" />
			</Select>

			<Select id="msnComboBox" class="sapUiMediumMarginEnd"
				placeholder="{disruptiontrackerI18n>selectMSN}" items="{ path:'plantModel>/Rowsets/Rowset/0/Row' }"
				selectedKey="" change="filterByStation"
				enabled="{Profile>/identifiedUser/permissions/DISRUPTION_DISRUPTION_LIST}">
				<core:Item key="{plantModel>msn}" text="{plantModel>msn}" />
			</Select>

			<Select id="statusComboBox" class="sapUiMediumMarginEnd"
				placeholder="{disruptiontrackerI18n>selectStatus}" selectedKey=""
				change="filterDisruptions"
				enabled="{Profile>/identifiedUser/permissions/DISRUPTION_DISRUPTION_LIST}">
				<core:Item key="" text="{disruptiontrackerI18n>All} {disruptiontrackerI18n>status}" />
				<core:Item key="Pending" text="{disruptiontrackerI18n>status.pending}" />
				<core:Item key="Acknowledged" text="{disruptiontrackerI18n>status.acknowledged}" />
				<core:Item key="Answered" text="{disruptiontrackerI18n>status.answered}" />
				<core:Item key="Solved" text="{disruptiontrackerI18n>status.solved}" />
				<core:Item key="Closed" text="{disruptiontrackerI18n>status.closed}" />
				<core:Item key="Rejected" text="{disruptiontrackerI18n>status.rejected}" />
			</Select>

			<Select id="severityComboBox" class="sapUiMediumMarginEnd"
				placeholder="{disruptiontrackerI18n>selectStatus}" selectedKey=""
				change="filterDisruptions"
				enabled="{Profile>/identifiedUser/permissions/DISRUPTION_DISRUPTION_LIST}">
				<core:Item key="" text="{disruptiontrackerI18n>All} {disruptiontrackerI18n>severity}" />
				<core:Item key="1" text="{disruptiontrackerI18n>not_Blocked}" />
				<core:Item key="2" text="{disruptiontrackerI18n>disturbed}" />
				<core:Item key="3" text="{disruptiontrackerI18n>blocked}" />
			</Select>

			<Select id="resolutionGroupBox" class="sapUiMediumMarginEnd"
				placeholder="{disruptiontrackerI18n>resolutionGroup}" items="{disruptionsTrackerModel>/disruptionListDetails}"
				selectedKey="" change="filterDisruptions"
				enabled="{Profile>/identifiedUser/permissions/DISRUPTION_DISRUPTION_LIST}">
				<core:Item key="{disruptionsTrackerModel>responsibleGroup}"
					text="{disruptionsTrackerModel>responsibleGroupDesc}" />
			</Select>

		</Toolbar>


		<Panel  width="100%">
			<content>

				<!-- <Toolbar class="sapUiSmallMarginTop" height="1rem"> <Label text="{disruptiontrackerI18n>selectStation}" 
					width="13.7rem" class="sapUiLargeMarginEnd" /> <Label text="{disruptiontrackerI18n>selectMSN}" 
					width="13.7rem" class="sapUiLargeMarginEnd" /> <Label text="{disruptiontrackerI18n>selectStatus}" 
					width="13.7rem" class="sapUiLargeMarginEnd" /> <Label text="{disruptiontrackerI18n>resolutionGroup}" 
					/> </Toolbar> -->
				<Toolbar id="toolbar">
					<Button id="navBack" icon="sap-icon://arrow-left" press="onBackPress"
						type="Transparent" />


					<!--[MES V1.5] [Beg]SD-SP1604983-DT-040 --><!-- TODO: removed because its not working -->
					<SearchField id="disruptionSearchField" width="40%" visible="false"
						placeholder="{disruptiontrackerI18n>searchForWoOpe}" search="filterDisruptions" >
					</SearchField>
					<!--[MES V1.5] [End]SD-SP1604983-DT-040 -->

					<ToolbarSpacer />

					<Button text="{disruptiontrackerI18n>extractDisruptionList}" icon="sap-icon://excel-attachment"
						press="handleSelectedRowExcelExport" id="exportbutton" class="borderbutton" />

				<!-- 	<Button id="onDisruptionTableSettings" type="Transparent"
						press="onDisruptionTableSettings" icon="sap-icon://drop-down-list"
						tooltip="{disruptiontrackerI18n>disruptionFilter}" class="borderbutton" /> -->

					<Button id="gotoDisruptionKpi" icon="sap-icon://area-chart"
						text="{disruptiontrackerI18n>disruptionKPI}" press="airbus.mes.shell.util.navFunctions.disruptionKPI"
						class="borderbutton" />
				
				</Toolbar>

			</content>

		</Panel>


		<ui:Table id="disruptionsTable" enableCellFilter="true" showNoData="true" selectionMode="{path: 'Profile>/identifiedUser/permissions/DISRUPTION_DIS_DETAIL_CONSULT', formatter: '.setSelectionMode'}" selectionBehavior="Row"
			rows="{ path: 'disruptionsTrackerModel>/disruptionListDetails' }"
			visible="{Profile>/identifiedUser/permissions/DISRUPTION_DISRUPTION_LIST}" cellClick="onTableClick">

			<ui:columns>
				<ui:Column id="workOrderCol" filterProperty="workOrder"
					sortProperty="workOrder">
					<Label text="{disruptiontrackerI18n>workOrder}" />
					<ui:template>
						<Text text="{disruptionsTrackerModel>workOrder}" />
					</ui:template>
				</ui:Column>
				<ui:Column id="operationCol" filterProperty="operation"
					sortProperty="operation">
					<Label text="{disruptiontrackerI18n>operation}" />
					<ui:template>
						<Text text="{path: 'disruptionsTrackerModel>operation', formatter: 'airbus.mes.disruptiontracker.Formatter.setOperationText'}" />
					</ui:template>
				</ui:Column>
				
				<ui:Column id="categoryCol" filterProperty="category"
					sortProperty="category">
					<Label text="{disruptiontrackerI18n>object}" />
					<ui:template>
						<Text text="{disruptionsTrackerModel>category}" />						
					</ui:template>
				</ui:Column>
				
				<ui:Column id="reasonCol" filterProperty="reason"
					sortProperty="reason">
					<Label text="{disruptiontrackerI18n>attribute}" />
					<ui:template>
						<Text text="{disruptionsTrackerModel>reason}" />
					</ui:template>
				</ui:Column>
				
				<ui:Column id="originator" filterProperty="originatorName"
					sortProperty="originatorName">
					<Label text="{disruptiontrackerI18n>originator}" />
					<ui:template>
						<Text text="{disruptionsTrackerModel>originatorName}" />
					</ui:template>
				</ui:Column>
				
				<ui:Column id="openingTime" filterProperty="openingTime"
					sortProperty="openingTime">
					<Label text="{disruptiontrackerI18n>openingTime}" />
					<ui:template>
						<Text text="{disruptionsTrackerModel>openingTime}" />
					</ui:template>
				</ui:Column>
					
				<ui:Column id="gravityCol"
					sortProperty="severity">
					<Label text="{disruptiontrackerI18n>severity}" />
					<ui:template>
						<HBox>
							<core:Icon
								src="{path: 'disruptionsTrackerModel>status', formatter: 'airbus.mes.disruptiontracker.Formatter.setIcon'}"
								color="{path: 'disruptionsTrackerModel>severity', formatter: 'airbus.mes.disruptiontracker.Formatter.setGravityColor'}"
								class="sapUiSmallMarginEnd" />
							<Text
								text="{parts: [ {path: 'disruptionsTrackerModel>status'}, {path: 'disruptionsTrackerModel>severity'}, {path: 'disruptionsTrackerModel>escalationLevel'} ], formatter: 'airbus.mes.disruptiontracker.Formatter.setSeverityText'}" />
						</HBox>
					</ui:template>
				</ui:Column>
				
				<ui:Column id="statusCol"
					sortProperty="status">
					<Label text="{disruptiontrackerI18n>status}" />
					<ui:template>
						<Text
							text="{path: 'disruptionsTrackerModel>status', formatter: 'airbus.mes.disruptiontracker.Formatter.setDisruptionTrackerStatus'}" />
					</ui:template>
				</ui:Column>

				
				<ui:Column id="solutionCol" filterProperty="Solution"
					sortProperty="Solution">
					<Label text="{disruptiontrackerI18n>solution}" />
					<ui:template>
						<Text text="{path: 'disruptionsTrackerModel>solution', formatter: 'airbus.mes.disruptions.Formatter.formatComment'}" />
					</ui:template>
				</ui:Column>
				
				<ui:Column id="resolutionGroupCol"
					sortProperty="responsibleGroupDesc">
					<Label text="{disruptiontrackerI18n>resolutionGroup}" />
					<ui:template>
						<Text text="{disruptionsTrackerModel>responsibleGroupDesc}" />
					</ui:template>
				</ui:Column>
				
				<ui:Column id="resolver" filterProperty="resolverName"
					sortProperty="resolverName">
					<Label text="{disruptiontrackerI18n>resolver}" />
					<ui:template>
						<Text text="{disruptionsTrackerModel>resolverName}" />
					</ui:template>
				</ui:Column>
				
				<ui:Column id="fixByTimeCol" filterProperty="requiredFixBy"
					sortProperty="requiredFixBy">
					<Label text="{disruptiontrackerI18n>fixByTime}" />
					<ui:template>
						<Text text="{path :'disruptionsTrackerModel>requiredFixBy'}" />
					</ui:template>
				</ui:Column>
				
				<ui:Column id="escalationCol" filterProperty="escalationLevel"
					sortProperty="escalationLevel">
					<Label text="{disruptiontrackerI18n>escalation}" />
					<ui:template>
						<Text text="{disruptiontrackerI18n>level} {disruptionsTrackerModel>escalationLevel}" />
					</ui:template>
				</ui:Column>
				
				<ui:Column id="escalationDate" filterProperty="escalationDateTime"
					sortProperty="escalationDateTime">
					<Label text="{disruptiontrackerI18n>dateofescalation}" />
					<ui:template>
						<Text text="{path: 'disruptionsTrackerModel>escalationDateTime'}" />
					</ui:template>
				</ui:Column>


				<ui:Column id="openingTimeCol" filterProperty="openDuration"
					sortProperty="openDuration">
					<Label text="{disruptiontrackerI18n>timeToGetFix}" />
					<ui:template>
						<Text text="{path: 'disruptionsTrackerModel>openDuration', formatter: 'airbus.mes.disruptiontracker.Formatter.formatOpeningTime'}" />
					</ui:template>
				</ui:Column>
				
								
				<ui:Column id="dateOfanswer" filterProperty="dateOfAnswer"
					sortProperty="dateOfAnswer">
					<Label text="{disruptiontrackerI18n>dateofanswer}" />
					<ui:template>
						<Text text="{disruptionsTrackerModel>dateOfAnswer}" />
					</ui:template>
				</ui:Column>
				
				
				<ui:Column id="originatorGroupCol" filterProperty="originatorGroupDesc"
					sortProperty="originatorGroupDesc">
					<Label text="{disruptiontrackerI18n>originatorGroup}" />
					<ui:template>
						<Text text="{disruptionsTrackerModel>originatorGroup}" />
					</ui:template>
				</ui:Column>
					
			</ui:columns>

			<!-- <items>
				<ColumnListItem
					type="{path: 'Profile>/connectedUser/permissions/DISRUPTION_DIS_DETAIL_CONSULT', formatter: 'airbus.mes.disruptiontracker.Formatter.setType'}"
					press="onTableClick">
					<cells>
						
						
						
					</cells>
				</ColumnListItem>
			</items> -->

		</ui:Table>
	</Page>

</mvc:View>
