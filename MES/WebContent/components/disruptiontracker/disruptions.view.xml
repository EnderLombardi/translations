<mvc:View controllerName="airbus.mes.disruptiontracker.disruptions"
	xmlns:l="sap.ui.layout" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc"
	xmlns="sap.m">
	<Page class="disruptions" showHeader="false">

		<subHeader>
			<Bar class="pageHeader">
				<contentLeft>
					<Button id="navBack" icon="sap-icon://arrow-left" text="{disruptiontrackerI18n>back}" press="onNavBack" type="Transparent"/>
				</contentLeft>
				<contentMiddle>
					<Text text="{disruptiontrackerI18n>disruptionsTitle}" class="headerText" />
				</contentMiddle>
			</Bar>
		</subHeader>

		<Panel width="100%">
			<content>

				<Toolbar class="sapUiSmallMarginTop" height="1rem">
					<Label text="{disruptiontrackerI18n>selectStation}" width="13.7rem"  class="sapUiLargeMarginEnd" />
					<Label text="{disruptiontrackerI18n>selectMSN}" width="13.7rem"  class="sapUiLargeMarginEnd" />
					<Label text="{disruptiontrackerI18n>selectStatus}" width="13.7rem"  class="sapUiLargeMarginEnd" />
					<Label text="{disruptiontrackerI18n>resolutionGroup}" />
				</Toolbar>
				<Toolbar>
					<ComboBox id="stationComboBox" class="sapUiMediumMarginEnd customComboBox"
						placeholder="{disruptiontrackerI18n>selectStation}" items="{ path:'plantModel>/Rowsets/Rowset/0/Row' }"
						selectedKey="" selectionChange="filterByStation">
						<core:Item key="{plantModel>station}" text="{plantModel>stationDescription}" />
					</ComboBox>
					
				 	<ComboBox id="msnComboBox" class="sapUiMediumMarginEnd customComboBox"
						placeholder="{disruptiontrackerI18n>selectMSN}" items="{ path:'plantModel>/Rowsets/Rowset/0/Row' }"
						selectedKey="" selectionChange="filterByStation">
						<core:Item key="{plantModel>msn}" text="{plantModel>msn}" />
					</ComboBox> 
 
					<ComboBox id="statusComboBox" class="sapUiMediumMarginEnd customComboBox"
						placeholder="{disruptiontrackerI18n>selectStatus}"
						selectedKey=" "
						selectionChange="filterDisruptions">
						<core:Item key=" " text="All" />
						<core:Item key="PENDING" text="{disruptiontrackerI18n>status.pending}" />
						<core:Item key="ACKNOWLEDGED" text="{disruptiontrackerI18n>status.acknowledged}" />
						<core:Item key="SOLVED" text="{disruptiontrackerI18n>status.solved}" />
						<core:Item key="CLOSED" text="{disruptiontrackerI18n>status.closed}" />
						<core:Item key="REJECTED" text="{disruptiontrackerI18n>status.rejected}" />
					</ComboBox>
					
					<ComboBox id="resolutionGroupBox" class="sapUiMediumMarginEnd customComboBox"
						placeholder="{disruptiontrackerI18n>resolutionGroup}" items="{disruptionsTrackerModel>/Rowsets/Rowset/0/Row}"
						selectedKey="" selectionChange="filterDisruptions">
						<core:Item key="{disruptionsTrackerModel>ResponsibleGroup}" text="{disruptionsTrackerModel>ResponsibleGroupDesc}" />
					</ComboBox>

					<!-- <SearchField width="13rem" placeholder="{disruptiontrackerI18n>search}" /> -->
					<ToolbarSpacer />

 					 <Button id="gotoDisruptionKpi" icon="sap-icon://area-chart"
						text="{disruptiontrackerI18n>disruptionKPI}" press="onPressDisruptionKPI" /> 
				</Toolbar>

			</content>

		</Panel>


		<Table id="disruptionsTable" class="disruptionsTable sapUiSmallMarginBottom"
			items="{ path: 'disruptionsTrackerModel>/Rowsets/Rowset/0/Row' }" growing="true" growingThreshold="50">
			<headerToolbar>
				<Toolbar>
					<ToolbarSpacer />

					<Button press="onDisruptionTableSettings" icon="sap-icon://drop-down-list" />

				</Toolbar>
			</headerToolbar>
			<columns>
				<Column>
					<Text text="{disruptiontrackerI18n>operation}" />
				</Column>
		<!-- 		<Column>
					<Text text="{disruptiontrackerI18n>oldgravity}" />
				</Column> -->
				<Column>
					<Text text="{disruptiontrackerI18n>gravity}" />
				</Column>
				<Column>
					<Text text="{disruptiontrackerI18n>status}" />
				</Column>
				<Column>
					<Text text="{disruptiontrackerI18n>category}" />
				</Column>
				<Column>
					<Text text="{disruptiontrackerI18n>reason}" />
				</Column>
				<Column>
					<Text text="{disruptiontrackerI18n>originatorGroup}" />
				</Column>
				<Column>
					<Text text="{disruptiontrackerI18n>resolutionGroup}" />
				</Column>
				<Column>
					<Text text="{disruptiontrackerI18n>escalation}" />
				</Column>
				<Column>
					<Text text="{disruptiontrackerI18n>openingTime}" />
				</Column>
				<Column>
					<Text text="{disruptiontrackerI18n>fixedByTime}" />
				</Column>
				<Column>
					<Text text="{disruptiontrackerI18n>promisedDate}" />
				</Column>
				<Column>
					<Text text="{disruptiontrackerI18n>timeBofreNextEsc}" />
				</Column>
				<Column>
					<Text text="{disruptiontrackerI18n>description}" />
				</Column>
				<Column>
					<Text text="{disruptiontrackerI18n>solution}" />
				</Column>
				<Column>
					<Text text="{disruptiontrackerI18n>closureDate}" />
				</Column>
			</columns>

			<items>
				<ColumnListItem type="Navigation" press="onTableClick">
					<cells>
						<Text text="{disruptionsTrackerModel>WorkOrder} / {path: 'disruptionsTrackerModel>Operation', formatter: 'airbus.mes.disruptiontracker.Formatter.formatOperation'}" />
						<!-- <ObjectStatus class="sapUiSmallMarginBottom"
							text="{parts: [ {path: 'disruptionsTrackerModel>Status'}, {path: 'disruptionsTrackerModel>Gravity'}, {path: 'disruptionsTrackerModel>Severity'} ], formatter: 'airbus.mes.disruptiontracker.Formatter.setText'}"
							state="{parts: [ {path: 'disruptionsTrackerModel>Status'}, {path: 'disruptionsTrackerModel>Gravity'}, {path: 'disruptionsTrackerModel>Severity'} ], formatter: 'airbus.mes.disruptiontracker.Formatter.setState'}"
							icon="{path: 'disruptionsTrackerModel>Status', formatter: 'airbus.mes.disruptiontracker.Formatter.setIcon'}" /> -->
						<HBox>
							<core:Icon src="{path: 'disruptionsTrackerModel>Status', formatter: 'airbus.mes.disruptiontracker.Formatter.setIcon'}" color="{parts: [ {path: 'disruptionsTrackerModel>Status'}, {path: 'disruptionsTrackerModel>Gravity'}, {path: 'disruptionsTrackerModel>Severity'} ], formatter: 'airbus.mes.disruptiontracker.Formatter.setGravityColor'}" class="sapUiSmallMarginEnd" />
							<Text text="{parts: [ {path: 'disruptionsTrackerModel>Status'}, {path: 'disruptionsTrackerModel>Gravity'}, {path: 'disruptionsTrackerModel>Severity'} ], formatter: 'airbus.mes.disruptiontracker.Formatter.setText'}" />
						</HBox>	
						<Text text="{disruptionsTrackerModel>Status}" />
						<Text text="{disruptionsTrackerModel>Category}" />
						<Text text="{disruptionsTrackerModel>Reason}" />
						<Text text="{disruptionsTrackerModel>OriginatorGroupDesc}" />
						<Text text="{disruptionsTrackerModel>ResponsibleGroupDesc}" />
						<Text text="{path: 'disruptionsTrackerModel>EscalationLevel', formatter: 'airbus.mes.disruptiontracker.Formatter.setEscalationText'}" />
						<Text text="{parts: [ {path: 'disruptionsTrackerModel>OpeningTime'}, {path: 'disruptionsTrackerModel>ClosureDate'}], formatter: 'airbus.mes.disruptiontracker.Formatter.formatOpeningTime'}" />
						<Text text="0" />
						<Text text="{path: 'disruptionsTrackerModel>PromisedDateTime', formatter: 'airbus.mes.disruptiontracker.Formatter.isoDateconvert'}" />
						<Text text="{disruptionsTrackerModel>TimeBeforeNextEscalation}" />
						<Text text="{disruptionsTrackerModel>Description}" />
						<Text text="{disruptionsTrackerModel>Solution}" />
						<Text text="{path: 'disruptionsTrackerModel>ClosureDate', formatter: 'airbus.mes.disruptiontracker.Formatter.isoDateconvert'}" />
						
						<!-- isoDateconvert -->
					</cells>
				</ColumnListItem>
			</items>

		</Table>
	</Page>

</mvc:View>
