<core:View controllerName="airbus.mes.disruptiontracker.kpi.disruptionKPIChart"
	xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" xmlns:viz="sap.viz.ui5.controls"
	xmlns:l="sap.ui.layout" xmlns:core="sap.ui.core" xmlns:viz.data="sap.viz.ui5.data"
	xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds" xmlns:commons="sap.ui.commons">

	<Page showHeader="false" class="disruptionKPI">
		<!-- <Bar id="disruptionKPITitleSubheader" class="pageHeader"> <contentLeft> 
			<Button id="navBack" icon="sap-icon://arrow-left" text="{i18n>back}" press="onNavBack" 
			type="Transparent" /> </contentLeft> <contentMiddle> <Label id="disruptionKPITitle" 
			text="{i18n>disruptionKPITitle}" class="lineTrackerName" /> </contentMiddle> 
			</Bar> -->
		<Toolbar class="pageHeader">
			<Title text="{i18n>disruptionKPITitle}" id="headerText" class="headerText" />
			<ComboBox id="stationComboBox" class="sapUiMediumMarginEnd customComboBox"
				placeholder="{disruptiontrackerI18n>selectStation}" items="{ path:'plantModel>/Rowsets/Rowset/0/Row' }"
				selectedKey="" selectionChange="filterByStation"
				enabled="{path: 'disruptionsTrackerModel>Status', formatter: 'airbus.mes.disruptiontracker.Formatter.setVisible'}">
				<core:Item key="{plantModel>station}" text="{plantModel>stationDescription}" />
			</ComboBox>

			<ComboBox id="msnComboBox" class="sapUiMediumMarginEnd customComboBox"
				placeholder="{disruptiontrackerI18n>selectMSN}" items="{ path:'plantModel>/Rowsets/Rowset/0/Row' }"
				selectedKey="" selectionChange="filterByStation"
				enabled="{path: 'disruptionsTrackerModel>Status', formatter: 'airbus.mes.disruptiontracker.Formatter.setVisible'}">
				<core:Item key="{plantModel>msn}" text="{plantModel>msn}" />
			</ComboBox>

			<ComboBox id="statusComboBox" class="sapUiMediumMarginEnd customComboBox"
				placeholder="{disruptiontrackerI18n>selectStatus}" selectedKey=""
				selectionChange="filterDisruptions"
				enabled="{path: 'disruptionsTrackerModel>Status', formatter: 'airbus.mes.disruptiontracker.Formatter.setVisible'}">
				<core:Item key="" text="{disruptiontrackerI18n>All}" />
				<core:Item key="Pending" text="{disruptiontrackerI18n>status.pending}" />
				<core:Item key="Acknowledged"
					text="{disruptiontrackerI18n>status.acknowledged}" />
				<core:Item key="Solved" text="{disruptiontrackerI18n>status.solved}" />
				<core:Item key="Closed" text="{disruptiontrackerI18n>status.closed}" />
				<core:Item key="Rejected" text="{disruptiontrackerI18n>status.rejected}" />
			</ComboBox>

			<ComboBox id="resolutionGroupBox" class="sapUiMediumMarginEnd customComboBox"
				placeholder="{disruptiontrackerI18n>resolutionGroup}" items="{disruptionsTrackerModel>/Rowsets/Rowset/0/Row}"
				selectedKey="" selectionChange="filterDisruptions"
				enabled="{path: 'disruptionsTrackerModel>Status', formatter: 'airbus.mes.disruptiontracker.Formatter.setVisible'}">
				<core:Item key="{disruptionsTrackerModel>ResponsibleGroup}"
					text="{disruptionsTrackerModel>ResponsibleGroupDesc}" />
			</ComboBox>

		</Toolbar>


		<content>
			<OverflowToolbar class="Subheader"
				width="100%">
				<content>
					<Button id="navBack" icon="sap-icon://arrow-left" press="onNavBack" type="Transparent" />
				</content>
			</OverflowToolbar>


			<l:Grid hSpacing="1" vSpacing="1" defaultSpan="L6 M12 S12">
				<l:content>

					<viz:VizFrame id="vizFrame" width="100%" class="chart"
						uiConfig="{applicationSet:'fiori'}" legendVisible="false">
						<viz:dataset>
							<viz.data:FlattenedDataset data="{TimeLostperAttribute>/category}">
								<viz.data:dimensions>
									<viz.data:DimensionDefinition
										axis="1" name="{i18n>Category}" value="{TimeLostperAttribute>name}" />
								</viz.data:dimensions>
								<viz.data:measures>
									<viz.data:MeasureDefinition name="{i18n>TimeLost}"
										value="{path: 'TimeLostperAttribute>value' , formatter: 'airbus.mes.disruptiontracker.Formatter.msToMinutesConverter'}" />
								</viz.data:measures>
							</viz.data:FlattenedDataset>
						</viz:dataset>
						<viz:feeds>
							<viz.feeds:FeedItem uid="axisLabels" type="Dimension"
								values="{i18n>Category}" />
							<viz.feeds:FeedItem id='valueAxisFeed1' uid="primaryValues"
								type="Measure" values="{i18n>TimeLost}" />
						</viz:feeds>
					</viz:VizFrame>

					<commons:HorizontalDivider id="divider1"
						class="sapUiSmallMarginTopBottom" visible=""></commons:HorizontalDivider>



					<viz:VizFrame id="vizFrame2" width="100%" class="chart"
						uiConfig="{applicationSet:'fiori'}" legendVisible="false">
						<viz:dataset width="50%">
							<viz.data:FlattenedDataset data="{TimeLostperAttribute>/reason}">
								<viz.data:dimensions>
									<viz.data:DimensionDefinition
										axis="1" name="{i18n>Reason}" value="{TimeLostperAttribute>name}" />
								</viz.data:dimensions>
								<viz.data:measures>
									<viz.data:MeasureDefinition name="{i18n>TimeLost}"
										value="{path: 'TimeLostperAttribute>value' , formatter: 'airbus.mes.disruptiontracker.Formatter.msToMinutesConverter'}" />
								</viz.data:measures>
							</viz.data:FlattenedDataset>
						</viz:dataset>
						<viz:feeds>
							<viz.feeds:FeedItem uid="axisLabels" type="Dimension"
								values="{i18n>Reason}" />
							<viz.feeds:FeedItem id='valueAxisFeed2' uid="primaryValues"
								type="Measure" values="{i18n>TimeLost}" />
						</viz:feeds>
					</viz:VizFrame>

					<commons:HorizontalDivider id="divider2"
						class="sapUiSmallMarginTopBottom" visible="true"></commons:HorizontalDivider>
					<commons:HorizontalDivider id="divider3"
						class="sapUiSmallMarginTopBottom"></commons:HorizontalDivider>

					<viz:VizFrame id="vizFrame3" width="100%" class="chart"
						vizType="bar" uiConfig="{applicationSet:'fiori'}" legendVisible="false">
						<viz:dataset width="50%">
							<viz.data:FlattenedDataset data="{TimeLostperAttribute>/operation}">
								<viz.data:dimensions>
									<viz.data:DimensionDefinition
										axis="1" name="{i18n>operation}"
										value="{ path: 'TimeLostperAttribute>name' , formatter: 'airbus.mes.disruptiontracker.Formatter.formatOperation'}" />
								</viz.data:dimensions>
								<viz.data:measures>
									<viz.data:MeasureDefinition name="{i18n>TimeLost}"
										value="{path: 'TimeLostperAttribute>value' , formatter: 'airbus.mes.disruptiontracker.Formatter.msToMinutesConverter'}" />
								</viz.data:measures>
							</viz.data:FlattenedDataset>
						</viz:dataset>
						<viz:feeds>
							<viz.feeds:FeedItem uid="axisLabels" type="Dimension"
								values="{i18n>operation}" />
							<viz.feeds:FeedItem id='valueAxisFeed3' uid="primaryValues"
								type="Measure" values="{i18n>TimeLost}" />
						</viz:feeds>
					</viz:VizFrame>

					<commons:HorizontalDivider id="divider4"
						class="sapUiSmallMarginTopBottom" visible=""></commons:HorizontalDivider>



					<viz:VizFrame id="vizFrame4" width="100%" class="chart"
						vizType="bar" uiConfig="{applicationSet:'fiori'}" legendVisible="false">
						<viz:dataset width="50%">
							<viz.data:FlattenedDataset data="{TimeLostperAttribute>/msn}">
								<viz.data:dimensions>
									<viz.data:DimensionDefinition
										axis="1" name="{i18n>MSN}" value="{TimeLostperAttribute>name}" />
								</viz.data:dimensions>
								<viz.data:measures>
									<viz.data:MeasureDefinition name="{i18n>TimeLost}"
										value="{path: 'TimeLostperAttribute>value' , formatter: 'airbus.mes.disruptiontracker.Formatter.msToMinutesConverter'}" />
								</viz.data:measures>
							</viz.data:FlattenedDataset>
						</viz:dataset>
						<viz:feeds>
							<viz.feeds:FeedItem uid="axisLabels" type="Dimension"
								values="{i18n>MSN}" />
							<viz.feeds:FeedItem id='valueAxisFeed4' uid="primaryValues"
								type="Measure" values="{i18n>TimeLost}" />
						</viz:feeds>
					</viz:VizFrame>

				</l:content>
			</l:Grid>
		</content>
	</Page>
</core:View>