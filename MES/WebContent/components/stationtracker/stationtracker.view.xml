<core:View xmlns:core="sap.ui.core" xmlns="sap.m"
	xmlns:suite="sap.suite.ui.commons" controllerName="airbus.mes.stationtracker.stationtracker"
	xmlns:html="http://www.w3.org/1999/xhtml" xmlns:custom="airbus.mes.stationtracker"
	xmlns:control="airbus.mes.stationtracker.control" xmlns:layout="sap.ui.layout"
	xmlns:micro="sap.suite.ui.microchart" xmlns:uni="sap.ui.unified">
	<Page title="Station Tracker" height="100%" showHeader="false"
		enableScrolling="false " class="GenricBgColor">

		<content width="100%" height="100%">
			<Panel id="kpi_header" expandable="true" expanded="true"
				expandAnimation="false" class="pageHeader kpiPageHeader contentNoPad">
				<headerToolbar>
					<Toolbar id="kpiHeaderToolbar" class="classKpiheaderToolbar">
						<!-- <DatePicker id="DatePicker" width="auto" change="changeDay" class="pageHeaderBlue"/> -->
						<Button id="dateButton" icon="sap-icon://appointment" type="Transparent"
							press="datePick" class="classDateButton" />
						<Label id="dateLabel" text="" class="classDateLabel" />
						<Select id="selectShift"
							class="sapUiTinyMarginBeginEnd pageHeader pageHeaderBlue" change="changeShift"
							items="{ path : 'stationTrackerShift>/' }" enabled="false">
							<core:Item key="{stationTrackerShift>shiftID}" text="{stationTrackerShift>shiftName}" />
						</Select>
						<Button id="ProductionButton"
							text="{StationTrackerI18n>ProductionGroup} : {StationTrackerI18n>StatusAll}"
							type="Transparent" class="whiteColor whiteButton" press="onProductionGroupPress"/>
						
						<Select id="selectUser" change="selectUser"
							class="sapUiTinyMarginBeginEnd pageHeader pageHeaderBlue" 
							items="{ path : 'ressourcePoolModel>/Rowsets/Rowset/0/Row' }" text="test">
							<core:Item key="{ressourcePoolModel>USER_ID}" text="{ressourcePoolModel>FNAME} {ressourcePoolModel>LNAME}" />
						</Select>
						
						<ToolbarSpacer />
						<Button id="TeamButton" text="{StationTrackerI18n>ButtonTeam}"
							type="Transparent"
							class="tiffanyColor whiteButton buttonStatus2 iconbuttonTeam sapUiSmallMarginBegin"
							icon="sap-icon://group" press="onTeamPress" />
						<Button id="hideKPI" type="Transparent" icon="sap-icon://hide"
							text="{StationTrackerI18n>HideKPIS}" press="hideKPI"/>
					</Toolbar>

				</headerToolbar>
				<content>
					<HBox id="kpiHeaderContent" class="classKpiHeaderContent"
						width="100%">

						<HBox justifyContent="SpaceAround" id="boxTaktAdherence"
							width="32%" class="contentHeaderCont">

							<HBox>

								<VBox justifyContent="SpaceAround" width="50%" id="chartId">
									<VBox>
										<layout:Grid class="" defaultSpan="L6 M6 S12">
											<layout:content>
												<Label text="Plan:650" class="KpiMediumText KPITaktChartBlueText" />
												<Label text="Actual:550"
													class="KpiMediumText whiteText KPITaktChartRightText" />
											</layout:content>
										</layout:Grid>
										<custom:TaktAdherenceAreaChart
											id="takt_adherence_area_chart" 
											data="{KPI>/Rowsets/Rowset/0/Row/ChartTakt/data}"
											realData="{KPI>/Rowsets/Rowset/0/Row/ChartTakt/realData}">
											<custom:data>
												<custom:Coordinates x="{KPI>x}" y="{KPI>y}"></custom:Coordinates>
											</custom:data>
											<custom:realData>
												<custom:Coordinates x="{KPI>x}" y="{KPI>y}"></custom:Coordinates>
											</custom:realData>
										</custom:TaktAdherenceAreaChart>
										<Label text="Planned Start/End of Assembly" class=" whiteText" />

										<layout:Grid class="" defaultSpan="L6 M6 S6">
											<layout:content>
												<Label text="25 JUN - 7:00" class=" whiteText" />
												<Label text="02 JUL - 16:00" class=" whiteText KPITaktChartRightText" />
											</layout:content>
										</layout:Grid>
									</VBox>
								</VBox>
								<VBox id="boxTaktAdherenceRight" width="50%">
									<Label text="{StationTrackerI18n>TaktAdherence}"
										width="100%" class="whiteTextHeader sapUiSmallMarginTop" />
									<VBox justifyContent="SpaceAround" height="100%">
										<HBox class="sapUiSmallMarginBottom">
											<VBox width="31%">
												<Label text="{StationTrackerI18n>Adherence}" class=" whiteText" />
												<Label
													text="{KPItaktAdherence>/taktAdherenceUI}%"
													class="sapUiSmallMarginTop kpiValue  whiteText" height="100%" />

											</VBox>
											<VBox width="69%">
												<layout:Grid id="TaktAdherenceTrend" class="classTaktAdherenceTrend"
													defaultSpan="L4 M4 S4">
													<layout:content>
														<Label text="{StationTrackerI18n>Trend}"
															class=" whiteText takt_kpi_name takt_kpi_trend ">
															<layoutData>
																<layout:GridData span="L8 M8 S8" />
															</layoutData>
														</Label>
														<core:Icon src="{path:'KPItaktAdherence>/trendUI', formatter:'airbus.mes.stationtracker.util.Formatter.KPIiconTrendSrc'}"
															class="TrendGreen takt_kpi_value takt_kpi_trend_value" color="{path:'KPItaktAdherence>/trendUI', formatter:'airbus.mes.stationtracker.util.Formatter.KPIiconTrendColor'}"/>

														<Label text="{StationTrackerI18n>DeltaVsSLB}" class="whiteText takt_kpi_name">
															<layoutData>
																<layout:GridData span="L8 M8 S8" />
															</layoutData>
														</Label>
														<Label
															text="{KPItaktAdherence>/deltaVsSLBUI} Hrs"
															class="whiteText takt_kpi_value" />

														<Label text="{StationTrackerI18n>DeltaVsSoA}" class="whiteText takt_kpi_name">
															<layoutData>
																<layout:GridData span="L8 M8 S8" />
															</layoutData>
														</Label>
														<Label
															text="{KPItaktAdherence>/deltaVsSoAUI} Hrs"
															class="whiteText takt_kpi_value" />

														<Label text="{StationTrackerI18n>CycleTime}" class="whiteText takt_kpi_name">
															<layoutData>
																<layout:GridData span="L8 M8 S8" />
															</layoutData>
														</Label>
														<Label
															text="{KPItaktAdherence>/cycleTimeUI} Hrs"
															class="whiteText takt_kpi_value" />

														<Label text="{StationTrackerI18n>WorkCintent}"
															class="whiteText takt_kpi_name">
															<layoutData>
																<layout:GridData span="L8 M8 S8" />
															</layoutData>
														</Label>
														<Label
															text="{KPItaktAdherence>/workContentUI} Hrs"
															class="whiteText takt_kpi_value" />
													</layout:content>
												</layout:Grid>
											</VBox>
										</HBox>
									</VBox>
								</VBox>

							</HBox>

						</HBox>

						<VBox id="boxLabourEfficiency" wrap="Wrap" width="7%"
							class="contentHeaderCont kpiBoxes labourEfficiencyBox">
							<Label text="{StationTrackerI18n>LabourEfficiency}"
								width="100%" class="whiteTextHeader" />
							<Label text="{KPItaktEfficiency>/labourEfficiencyUI}%"
								id="LabourEfficiencyValue" class="kpiValue"/>
						</VBox>

						<VBox id="boxSLBEfficiecy" width="10%" alignItems="Center"
							class="contentHeaderCont kpiBoxes">
							<Label text="{StationTrackerI18n>SLBEFFICIENCY}"
								class="whiteTextHeader" />
							<VBox class="marginTopKpiBody" width="100%">
								<micro:ComparisonMicroChart size="L"
									id="boxSLBEfficiecy_chart" 
									width="100%" colorPalette="#84bd00, #f5f5f5, #fe5000" class="kpiBody">
									<micro:data>
										<micro:ComparisonMicroChartData
											title="{StationTrackerI18n>TaktSLB}"
											value="{path:'KPItaktEfficiency>/slbEffectiveCapacityUI', formatter:'airbus.mes.stationtracker.util.Formatter.stringToInt'}"
											displayValue="{KPItaktEfficiency>/slbEffectiveCapacityUI}%" />
										<micro:ComparisonMicroChartData
											title="{StationTrackerI18n>WhiteSpaces}"
											value="{path:'KPItaktEfficiency>/slbWhiteSpaceUI', formatter:'airbus.mes.stationtracker.util.Formatter.stringToInt'}"
											displayValue="{KPItaktEfficiency>/slbWhiteSpaceUI}%" />
										<micro:ComparisonMicroChartData
											title="{StationTrackerI18n>RedSpaces}"
											value="{path:'KPItaktEfficiency>/slbRedSpacesUI', formatter:'airbus.mes.stationtracker.util.Formatter.stringToInt'}"
											displayValue="{KPItaktEfficiency>/slbRedSpacesUI}%"/>
										<micro:ComparisonMicroChartData
											id="hiddenRefBarSBL"
											title="{StationTrackerI18n>RedSpaces}"
											value="100"
											visible="false" />
									</micro:data>
								</micro:ComparisonMicroChart>
							</VBox>
						</VBox>

						<VBox id="boxOpenDisruptions" width="24%" class="contentHeaderCont kpiBoxes">
							<Label text="{StationTrackerI18n>DISRUPTION/ANDON}"
								class="whiteTextHeader" />
							<HBox class="kpiBodyWithoutMargin">
								<VBox width="30%" justifyContent="SpaceAround" class="openDisruptionTotal">
									<Label text="{StationTrackerI18n>DisruptionTotal}" class="kpiName"
										design="Bold" />
									<Label text="{StationTrackerI18n>Disruption}" class="kpiName" />
									<Label text="{KPIdisruption>/disruptionTotalUI}"
										class="kpiValue" design="Bold" />
									<!-- hard-coding to see real layouting -->
									<!--<Label text="5"
										class="kpiValue" design="Bold" />-->
									<!--<Label text="15"
										class="redText kpiValue kpiErrorValue" design="Bold" />-->
									<Label text="{StationTrackerI18n>Andon}" class="redText kpiErrorValue"
										design="Bold" />
									<Label text="{KPIdisruption>/andonTotalUI}"
										class="redText kpiValue kpiErrorValue" design="Bold" />
								</VBox>
								<VBox width="35%" class="openDisruptionDetail" justifyContent="SpaceAround">
									<Label text="{StationTrackerI18n>DisruptionDetails}"
										class="kpiName" design="Bold" />
									<Label text="{StationTrackerI18n>DisruptionsNC}"/>
									<Label text="{StationTrackerI18n>DisruptionsMissing}"/>
									<Label text="{StationTrackerI18n>DisruptionsTools}"/>
									<Label text="{StationTrackerI18n>DisruptionFTE}"/>
									<Label text="{StationTrackerI18n>DisruptionOther}"/>
								</VBox>
								<VBox alignItems="Center" width="20%" justifyContent="SpaceAround" class="openDisruptionValues kpiName">
									<Label text="{StationTrackerI18n>Disruption}" class="whiteText" />
									<Label text="{KPIdisruption>/disruptionNCUI}"
										class=" whiteText" />
									<Label text="{KPIdisruption>/disruptionMissingPartsUI}"
										class=" whiteText" />
									<Label text="{KPIdisruption>/disruptionMissingJTUI}"
										class=" whiteText" />
									<Label text="{KPIdisruption>/disruptionMissingFTEUI}"
										class=" whiteText" />
									<Label text="{KPIdisruption>/disruptionOtherUI}"
										class=" whiteText" />
								</VBox>
								<VBox alignItems="Center" width="15%" justifyContent="SpaceAround" class="openDisruptionAndon kpiName">
									<Label text="{StationTrackerI18n>Andon}" class="redText kpiErrorValue" />
									<Label text="{KPIdisruption>/andonNCUI}"
										class=" redText kpiErrorValue" />
									<Label text="{KPIdisruption>/andonMissingPartsUI}"
										class=" redText kpiErrorValue" />
									<Label text="{KPIdisruption>/andonMissingJTUI}"
										class=" redText kpiErrorValue" />
									<Label text="{KPIdisruption>/andonMissingFTEUI}"
										class="redText kpiErrorValue" />
									<Label text="{KPIdisruption>/andonOtherUI}"
										class="redText kpiErrorValu" />
								</VBox>
							</HBox>
						</VBox>

						<VBox id="boxResolutionEfficiency" width="11%" alignItems="Center"
							class="contentHeaderCont kpiBoxes">
							<Label text="{StationTrackerI18n>ResolutionEfficiency}"
								class="whiteTextHeader" />
							<VBox class="marginTopKpiBody" width="100%">
								<micro:ComparisonMicroChart size="L"
									id="boxResolutionEfficiecy_chart"
									width="100%" colorPalette="#84bd00,#fe5000,#fe5000,#0F2D65" class="kpiBody">
									<micro:data>
										<micro:ComparisonMicroChartData
											title="{StationTrackerI18n>PromisedInTakt}" 
											value="{path:'KPIresolutionEfficiency>/promisedInTaktUI', formatter:'airbus.mes.stationtracker.util.Formatter.stringToInt'}"
											displayValue="{KPIresolutionEfficiency>/promisedInTaktUI}"/>
										<micro:ComparisonMicroChartData
											title="{StationTrackerI18n>PromisedOutTakt}"
											value="{path:'KPIresolutionEfficiency>/promisedOutOfTaktUI', formatter:'airbus.mes.stationtracker.util.Formatter.stringToInt'}"
											displayValue="{KPIresolutionEfficiency>/promisedOutOfTaktUI}"/>
										<micro:ComparisonMicroChartData	
											title="{StationTrackerI18n>NotAcknowledged}"
											value="{path:'KPIresolutionEfficiency>/notAcknowledgedUI', formatter:'airbus.mes.stationtracker.util.Formatter.stringToInt'}"
											displayValue="{KPIresolutionEfficiency>/notAcknowledgedUI}"/>
										<micro:ComparisonMicroChartData
											id="hiddenRefBarResolution"
											title="{StationTrackerI18n>RedSpaces}"
											visible="false"
											value="{path:'KPIresolutionEfficiency>/totalUI', formatter:'airbus.mes.stationtracker.util.Formatter.stringToInt'}" />
									</micro:data>
								</micro:ComparisonMicroChart>
							</VBox>
						</VBox>

						<VBox id="boxExtraWork" wrap="Wrap" width="6%" class="contentHeaderCont kpiBoxes kpiBoxExtraWork">
							<Label text="{StationTrackerI18n>ExtraWork}"
								width="100%" class="whiteTextHeader " />
							<Label text="{StationTrackerI18n>Operations}" width="100%"
								class="kpiName" />
							<Label text="{KPIextraWork>/operationsUI}"
								class="kpiValue" design="Bold" />
							<Label text="{StationTrackerI18n>Hrs}" width="100%"
								class="kpiName" />
							<Label text="{KPIextraWork>/hoursUI}"
								class="kpiValue" design="Bold" />
						</VBox>

						<VBox id="boxShiftStaffing" wrap="Wrap" width="10%"
							alignItems="Center" class="contentHeaderCont kpiBoxes">
							<Label text="{StationTrackerI18n>ShiftSTAFFING}" size="L"
								width="100%" class="whiteTextHeader" />
							<VBox width="100%" justifyContent="SpaceAround">
								<micro:DeltaMicroChart width="100%"
									id="shifStaffingHeader" isResponsive="true"
									value1="{path:'KPIshiftStaffing>/neededFteUI', formatter:'airbus.mes.stationtracker.util.Formatter.stringToInt'}"
									value2="{path:'KPIshiftStaffing>/allocatedFteUI', formatter:'airbus.mes.stationtracker.util.Formatter.stringToInt'}"
									title1="{StationTrackerI18n>NeedFTE}"
									title2="{StationTrackerI18n>AllocatedFTE}"
									displayValue1="{KPIshiftStaffing>/neededFteUI}"
									displayValue2="{KPIshiftStaffing>/allocatedFteUI}"
									deltaDisplayValue="{KPIshiftStaffing>/notAllocatedFteUI}"
									class="kpiDeltaMicroChart"/>
							</VBox>
						</VBox>
					</HBox>

				</content>
			</Panel>
			

			<OverflowToolbar id="toolbarstationtracker" class="Subheader" width="100%">
				<content>
					<SegmentedButton id="buttonViewMode">
						<layoutData>
							<OverflowToolbarLayoutData priority="NeverOverflow" />
						</layoutData>
						<items>
							<SegmentedButtonItem text="{StationTrackerI18n>ButtonShift}"
								press="onShiftPress" key="shift" />
							<SegmentedButtonItem text="{StationTrackerI18n>ButtonDay}"
								press="onDayPress" key="day" />
							<SegmentedButtonItem text="{StationTrackerI18n>ButtonTakt}"
								press="" key="takt" enabled="false" />
						</items>
					</SegmentedButton>
					<!-- <Label text="{StationTrackerI18n>GroupingSortBy}" /> -->
					<!-- <Label text="{StationTrackerI18n>Grouping}"/> -->
					<Select id="selectGroup" class="sapUiTinyMarginBeginEnd comboBoxStyle"
						items="{groupModel>/Rowsets/Rowset/0/Row/Grouping}" change="changeGroup">
						<core:ListItem key="{groupModel>key}"
							text="{ path : 'groupModel>Value' , formatter : '.getI18nValue' }" />
					</Select>
					<!-- <Label id="selectBoxLabel" text="{StationTrackerI18n>Granularity}"/> -->
					<Select id="selectBox" class="sapUiTinyMarginBeginEnd comboBoxStyle"
						items="{groupModel>/Rowsets/Rowset/0/Row/Boxing}" change="changeBox">
						<core:ListItem key="{groupModel>key}"
							text="{ path : 'groupModel>Value' , formatter : '.getI18nValue' }" />
						<!-- <core:Item text="Operations" key="OPERATION_ID"/> <core:Item text="WorkOrder" 
							key="WORKORDER_ID"/> -->
					</Select>
					<ToolbarSpacer />
					<HBox id="toolbarDate" class="sapUiTinyMarginBeginEnd"></HBox>
					<ToolbarSpacer />
					<Button text="{StationTrackerI18n>missingParts}" enabled="false"
						type="Transparent" icon="sap-icon://task" class="sapUiTinyMarginBeginEnd"></Button>
					<ToggleButton text="{StationTrackerI18n>ButtonShowCP}" type="Transparent"
						icon="sap-icon://kpi-corporate-performance" class="sapUiTinyMarginBeginEnd"
						press="onCPPress" pressed="false" />
		
					<Button text="{StationTrackerI18n>disruptions/andon}" press="showDisruption"
						type="Transparent" icon="sap-icon://alert" class="sapUiTinyMarginBeginEnd"></Button>
					<Button text="{StationTrackerI18n>ButtonOutstandingWork}"
						type="Transparent" icon="sap-icon://cause" class="sapUiTinyMarginBeginEnd"
						press="onOSWPress"></Button>
					<Button text="{StationTrackerI18n>ButtonUnplanned}" type="Transparent"
						icon="sap-icon://inspect" class="sapUiTinyMarginBeginEnd" press="onUnplannedPress"></Button>
					<ToggleButton text="{StationTrackerI18n>ButtonInitial}" type="Transparent"
						icon="sap-icon://past" class="sapUiTinyMarginBeginEnd" press="onInitialPlanPress" />

				</content>
			</OverflowToolbar>
			<custom:DHTMLXScheduler id="stationtracker"></custom:DHTMLXScheduler>


			<!-- For Disruption table in Station Tracker -->
			<!-- <control:disruptionNotifications id="disruptNotifications"> <control:disruptionContent 
				id="disruptContent"> </control:disruptionContent> </control:disruptionNotifications> -->
			<HBox class="slidingUpDownPanel GenricBgColor" id="disruptNotifications">
				<items>
				</items>
			</HBox>

		</content>
	</Page>
</core:View>