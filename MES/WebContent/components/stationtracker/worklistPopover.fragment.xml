<core:FragmentDefinition xmlns:core="sap.ui.core"
	xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:custom="airbus.mes.stationtracker"
	xmlns:html="http://www.w3.org/1999/xhtml">
	<Dialog title="Unplanned activities" class="pageHeaderDialog">
		<customHeader>
			<Toolbar class="pageHeader">
				<ToolbarSpacer />
				<Label id="LabelTitle" text="{ path: 'WorkListModel>andons' , formatter: 'airbus.mes.stationtracker.util.Formatter.setWorkListText' }" class="pageWelcome2" />
				<ToolbarSpacer />
			</Toolbar>
		</customHeader>
		<content>
			<VBox>
				<HBox>
					<Select class="sapUiTinyMarginBeginEnd comboBoxStyle"
						    items="{filterUnplannedModel>/Rowsets/Rowset/0/Row/Grouping}"
						    change="changeGroupWorkList"
						    visible="{ path: 'WorkListModel>andons' , formatter: 'airbus.mes.stationtracker.util.Formatter.isGroupingVisible' }">
						<core:ListItem text="{filterUnplannedModel>Value}" />					
					</Select>
				
				
					<Select class="sapUiTinyMarginBeginEnd comboBoxStyle"
						    items="{filterUnplannedModel>/Rowsets/Rowset/0/Row/Status}"
						    change="changeBox"
					        visible="{ path: 'WorkListModel>andons' , formatter: 'airbus.mes.stationtracker.util.Formatter.isGroupingVisible' }">						
						<core:ListItem text="{filterUnplannedModel>Value}" />					
					</Select>
				</HBox>
				<List id="myList" growing="true" growingThreshold="20"
					growingScrollToLoad="true" items="{ path: 'WorkListModel>/' }"
					selectionChange="onSelectionChange"
					mode="{ path : 'WorkListModel>andons' , formatter: 'airbus.mes.stationtracker.util.Formatter.setmodeList'}"
					includeItemInSelection="{ path : 'WorkListModel>andons' , formatter: 'airbus.mes.stationtracker.util.Formatter.isCheckboxVisible'}">
					<items>
						<InputListItem id="sorterList">
							<content>
								<HBox>
									<items>
										<custom:customProgressIndicator
											width="auto" state="sap.ui.core.ValueState.Success" status="{WorkListModel>status}"
											isAndon="{WorkListModel>andons}"
											displayValue="{ parts: [ 'WorkListModel>shopOrder','WorkListModel>shopOrderDescription' ], formatter: 'airbus.mes.stationtracker.util.Formatter.titleWorklist'}"
											displayValue2="{ parts: [ 'WorkListModel>operationId','WorkListModel>operationDescription','WorkListModel>progress','WorkListModel>totalDuration' ], formatter: 'airbus.mes.stationtracker.util.Formatter.displayValueIM'}"
											percentValue="{ parts: [ 'WorkListModel>progress','WorkListModel>totalDuration' ], formatter: 'airbus.mes.stationtracker.util.Formatter.percentValue'}">
											<custom:layoutData>
												<FlexItemData baseSize="60%" growFactor="1"></FlexItemData>
											</custom:layoutData>
										</custom:customProgressIndicator>
									</items>
								</HBox>
							</content>
						</InputListItem>
					</items>
				</List>
			</VBox>
		</content>
		<buttons>
			<Button text="Import" type="Transparent" icon="sap-icon://forward"
				class="sapUiTinyMarginBeginEnd pageHeaderDialog" press="onUnplannedImport"
				visible="{ path : 'WorkListModel>andons' , formatter: 'airbus.mes.stationtracker.util.Formatter.isCheckboxVisible'}">
			</Button>
			<Button text="Close" type="Transparent" icon="sap-icon://decline"
				class="sapUiTinyMarginBeginEnd" press="onUnplannedClose"
			>
			</Button>
		</buttons>
	</Dialog>
</core:FragmentDefinition>

