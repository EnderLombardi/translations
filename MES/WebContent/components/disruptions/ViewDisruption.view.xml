<core:View xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc"
	xmlns="sap.m" xmlns:f="sap.ui.layout.form" xmlns:l="sap.ui.layout"
	controllerName="airbus.mes.disruptions.ViewDisruption" xmlns:html="http://www.w3.org/1999/xhtml">
	<Page enableScrolling="false" showHeader="false">
		<content>
			<List id="disrptlist" noDataText="{i18nModel>noDisruptions}"
				class="disruptionDetail sapUiSmallMarginBottom" items="{path: 'operationDisruptionsModel>/Rowsets/Rowset/0/Row'}">

				<CustomListItem>

					<Panel expandable="true" expanded="false" class="expandableIcon"
						expand="handleDisruptionPanelExpand">
						<headerToolbar>
							<Toolbar>
								<Title text="{operationDisruptionsModel>Subject}" class="panelTitleText" />
								<ToolbarSpacer />
								<Button text="{parts: [ {path: 'i18nModel>edit'}, {path: 'operationDisruptionsModel>OriginatorGroup'}, {path: 'operationDisruptionsModel>ResponsibleGroup'} ], formatter: 'airbus.mes.disruptions.Formatter.setVisibility'}" press="onEditDisruption" design="Transparent"
									icon="sap-icon://edit" />
								<Button text="{parts: [ {path: 'i18nModel>delete'}, {path: 'operationDisruptionsModel>OriginatorGroup'}, {path: 'operationDisruptionsModel>ResponsibleGroup'} ], formatter: 'airbus.mes.disruptions.Formatter.setVisibility'}" design="Transparent"
									icon="sap-icon://delete" press="onDeleteDisruption" />
								<Button text="{parts: [ {path: 'i18nModel>close'}, {path: 'operationDisruptionsModel>OriginatorGroup'}, {path: 'operationDisruptionsModel>ResponsibleGroup'} ], formatter: 'airbus.mes.disruptions.Formatter.setVisibility'}" design="Transparent"
									icon="sap-icon://collapse" press="onCloseDisruption" />

							</Toolbar>
						</headerToolbar>

						<f:Form class="formoperationDisruptionsModel" editable="true">
							<f:layout>
								<f:ResponsiveGridLayout span="L12 M12 S12" />
							</f:layout>
							<f:formContainers>
								<f:FormContainer ariaLabelledBy="Title2">
									<f:formElements>

										<f:FormElement>
											<f:label>
												<Label class="detailLabels" text="{i18nModel>gravity}">
													<layoutData>
														<l:GridData span="L3 M3 S12" />
													</layoutData>
												</Label>
											</f:label>
											<f:fields>

												<Text
													text="{parts: [ {path: 'operationDisruptionsModel>Status'}, {path: 'operationDisruptionsModel>Gravity'}, {path: 'operationDisruptionsModel>Severity'} ], formatter: 'airbus.mes.disruptions.Formatter.setText'}">
													<layoutData>
														<l:GridData span="L3 M3 S12" />
													</layoutData>
												</Text>
											</f:fields>
										</f:FormElement>


										<f:FormElement>
											<f:label>
												<Label class="detailLabels" text="{i18nModel>problem}">
													<layoutData>
														<l:GridData span="L2 M2 S12" />
													</layoutData>
												</Label>
											</f:label>
											<f:fields>

												<Text text="{operationDisruptionsModel>Category}">
													<layoutData>
														<l:GridData span="L4 M4 S12" />
													</layoutData>
												</Text>
											</f:fields>
										</f:FormElement>

										<f:FormElement>
											<f:label>
												<Label class="detailLabels" text="{i18nModel>resGroup}">
													<layoutData>
														<l:GridData span="L3 M3 S12" />
													</layoutData>
												</Label>
											</f:label>
											<f:fields>

												<Text text="{operationDisruptionsModel>ResponsibleGroup}">
													<layoutData>
														<l:GridData span="L3 M3 S12" />
													</layoutData>
												</Text>
											</f:fields>
										</f:FormElement>


										<f:FormElement>
											<f:label>
												<Label class="detailLabels" text="{i18nModel>nature}">
													<layoutData>
														<l:GridData span="L2 M2 S12" />
													</layoutData>
												</Label>
											</f:label>
											<f:fields>

												<Text text="{operationDisruptionsModel>Reason}">
													<layoutData>
														<l:GridData span="L4 M4 S12" />
													</layoutData>
												</Text>
											</f:fields>
										</f:FormElement>

										<f:FormElement>
											<f:label>
												<Label class="detailLabels" text="{i18nModel>date}">
													<layoutData>
														<l:GridData span="L3 M3 S12" />
													</layoutData>
												</Label>
											</f:label>
											<f:fields>

												<Text text="{operationDisruptionsModel>OpeningTime}">
													<layoutData>
														<l:GridData span="L3 M3 S12" />
													</layoutData>
												</Text>
											</f:fields>
										</f:FormElement>



										<f:FormElement>
											<f:label>
												<Label class="detailLabels" text="{i18nModel>expected}">
													<layoutData>
														<l:GridData span="L2 M2 S12" />
													</layoutData>
												</Label>
											</f:label>
											<f:fields>
												<Text text="{operationDisruptionsModel>FixedByTime}">
													<layoutData>
														<l:GridData span="L4 M4 S12" />
													</layoutData>
												</Text>
											</f:fields>
										</f:FormElement>


										<!-- <f:FormElement> <f:label> <Label class="detailLabels" text="{i18nModel>status}"> 
											<layoutData> <l:GridData span="L3 M3 S12" /> </layoutData> </Label> </f:label> 
											<f:fields> <Text text="{operationDisruptionsModel>Status}"> <layoutData> 
											<l:GridData span="L3 M3 S12" /> </layoutData> </Text> </f:fields> </f:FormElement> -->

									</f:formElements>
								</f:FormContainer>
							</f:formContainers>
						</f:Form>

						<Text text="{i18nModel>status} : {operationDisruptionsModel>Status}" />
						
						<List showNoData="false" class="sapUiSmallMargin"
							items="{path: 'operationDisruptionsModel>/Rowsets/Rowset/1/Row'}">

							<CustomListItem>
								<Text text="Comment : {operationDisruptionsModel>Comment}"></Text>
							</CustomListItem>
						</List>


						<Panel id="commentBox" visible="false">

							<VBox width="79%">
								<TextArea id="commentArea" placeholder="{i18nModel>addCommentPlaceholder}"
									width="100%" />

								<HBox>
									<Button text="{i18nModel>submitComment}" press="submitComment"
										class="sapUiSmallMarginEnd" width="12rem" />

									<Button text="{i18nModel>cancelComment}" press="hideCommentBox"
										class="sapUiSmallMarginEnd" width="12rem" />
								</HBox>

							</VBox>

						</Panel>

						<Toolbar class="barcolor">
							<ToolbarSpacer />
							<Button id="rejectDisruption" text="{parts: [ {path: 'i18nModel>reject'}, {path: 'operationDisruptionsModel>OriginatorGroup'}, {path: 'operationDisruptionsModel>ResponsibleGroup'} ], formatter: 'airbus.mes.disruptions.Formatter.setVisibility'}"
								press="onRejectDisruption" design="Transparent" icon="sap-icon://sys-cancel-2" />
							<Button id="addComment" text="{parts: [ {path: 'i18nModel>addComment'}, {path: 'operationDisruptionsModel>OriginatorGroup'}, {path: 'operationDisruptionsModel>ResponsibleGroup'} ], formatter: 'airbus.mes.disruptions.Formatter.setVisibility'}"
								press="showCommentBox" design="Transparent" icon="sap-icon://comment" />
							<Button text="{parts: [ {path: 'i18nModel>acknowledge'}, {path: 'operationDisruptionsModel>OriginatorGroup'}, {path: 'operationDisruptionsModel>ResponsibleGroup'} ], formatter: 'airbus.mes.disruptions.Formatter.setVisibility'}"
								press="onAckDisruption" design="Transparent" icon="sap-icon://to-be-reviewed" />
							<Button text="{parts: [ {path: 'i18nModel>escalate'}, {path: 'operationDisruptionsModel>OriginatorGroup'}, {path: 'operationDisruptionsModel>ResponsibleGroup'} ], formatter: 'airbus.mes.disruptions.Formatter.setVisibility'}"
								press="onEscalateDisruption" design="Transparent" icon="sap-icon://message-warning" />
							<Button text="{parts: [ {path: 'i18nModel>markSolved'}, {path: 'operationDisruptionsModel>OriginatorGroup'}, {path: 'operationDisruptionsModel>ResponsibleGroup'} ], formatter: 'airbus.mes.disruptions.Formatter.setVisibility'}"
								press="onMarkSolvedDisruption" design="Transparent" icon="sap-icon://sys-add" />
						</Toolbar>
					</Panel>

				</CustomListItem>

			</List>
		</content>
		<footer>
			<Bar design="Footer" class="viewDisruptionFooter">
				<contentLeft>
					<Button id="reportDisruption" text="{i18nModel>reportDisruption}" press="onReportDisruption"
						icon="sap-icon://add" />
				</contentLeft>
				<contentRight>
					<Button id="btnClose" text="{i18nModel>close}" icon="sap-icon://decline"
						press="onCloseOperationDetailPopup" />
				</contentRight>
			</Bar>
		</footer>

	</Page>
</core:View>
