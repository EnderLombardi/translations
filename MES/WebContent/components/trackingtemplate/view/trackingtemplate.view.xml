<mvc:View 
	xmlns:core="sap.ui.core" 
	xmlns:mvc="sap.ui.core.mvc" 
	xmlns:u="sap.ui.unified" 
	xmlns="sap.m" controllerName="airbus.mes.trackingtemplate.controller.trackingtemplate" 
	xmlns:f="sap.ui.layout.form" 
	xmlns:l="sap.ui.layout" 
	xmlns:html="http://www.w3.org/1999/xhtml" 
	xmlns:cData="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1">
	<Page enableScrolling="true" showHeader="false" class="trackingTemplate">
		<content>
			<!-- Confirmation Notes -->
			<Panel expandable="true" expanded="false" headerText="{i18n>cn_title}" width="auto" class="sapUiResponsiveMargin">
				<content>
					<!-- Header ToolBar -->
					<OverflowToolbar height="3rem">
						<CheckBox text="{i18n>cn_toolbar_last}" enabled="true" selected="false" select="showOnlyLastNote"/>
						<CheckBox text="{i18n>cn_toolbar_confirmed}" enabled="true" selected="false" select="showOnlyLastConfirmationNote"/>
					</OverflowToolbar>
					<!-- List Comment -->
					<List id="confirmationNotes" items="{TrackingTemplate>/Rowsets/Rowset/0/Row}" includeItemInSelection="true" class="customListItem">
						<items>
							<StandardListItem title="{TrackingTemplate>ACTIVITY} : {TrackingTemplate>COMMENTS}" info="{TrackingTemplate>MODIFIED_DATE_TIME}"/>
						</items>
					</List>
				</content>
			</Panel>
			<!-- Work Order Notes -->
			<Panel expandable="true" expanded="false" headerText="{i18n>won_title}" width="auto" class="sapUiResponsiveMargin">
				<content>
					<!-- Header ToolBar -->
					<OverflowToolbar class="trackingTemplateButton" height="3rem">
						<CheckBox id="idCheckBox" text="{i18n>won_toolbar_last}" enabled="true" selected="false" select="showOnlyLastWONote"/>
						<ToolbarSpacer />
						<Button class="icon-edit" text="{i18n>won_toolbar_edit}" press="showCommentBox" icon="sap-icon://edit" />
						<Button class="icon-print" text="{i18n>won_toolbar_print}" press="printTrackingTemplate" icon="sap-icon://print"/>
					</OverflowToolbar>
					<!-- Comment box -->
					<Panel id="commentBox" visible="false" class="commentPanel">
						<Panel class="reasonCodeContainer">
							<Label text="{i18n>reasonCode}" />
							<Select text="{i18n>reasonCode}" change="onSelectionReason" id="reasonCodeSelectBox" forceSelection="false" items="{reasonCodeModel>/Rowsets/Rowset/0/Columns/Column}">
								<core:Item key="{reasonCodeModel>Name}" text="{reasonCodeModel>Description}" />
							</Select>
						</Panel>
						<TextArea id="commentArea" growing="true" maxLength="255" placeholder="{i18n>textAreaPlaceHolder}"/>
						<UploadCollection id="UploadCollection" maximumFilenameLength="55" maximumFileSize="10" multiple="true" sameFilenameAllowed="true" instantUpload="false" showSeparators="All" change="onChange" fileDeleted="onFileDeleted" filenameLengthExceed="onFilenameLengthExceed" fileSizeExceed="onFileSizeExceed" typeMissmatch="onTypeMissmatch" uploadComplete="onUploadComplete" beforeUploadStarts="onBeforeUploadStarts"></UploadCollection>
						<HBox>
							<Button text="{i18n>submitComment}" type="Accept" press="submitComment" class="sapUiSmallMarginEnd buttonAccept" width="12rem" />
							<Button text="{i18n>cancel}" type="Reject" press="hideCommentBox" class="sapUiSmallMarginEnd buttonReject" width="12rem" />
						</HBox>
					</Panel>
					<!-- List Comment -->
					<List id="listNotes" items="{path:'TrackingTemplate>/Rowsets/Rowset/0/Row', sorter: {path: 'MODIFIED_DATE_TIME', descending : true, sizeLimit : 1}}" headerText="Notes">
						<items>
							<ObjectListItem title="{TrackingTemplate>ACTIVITY}">
								<firstStatus>
									<ObjectStatus text="{TrackingTemplate>MODIFIED_DATE_TIME}"/>
								</firstStatus>
								<attributes>
									<ObjectAttribute text="{TrackingTemplate>COMMENTS}" />
								</attributes>
							</ObjectListItem>
						</items>
					</List>
				</content>
			</Panel>
		</content>
	</Page>
</mvc:View>